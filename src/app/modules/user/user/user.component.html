<div class="container">
  <div class="title-box">
    <h1>EMPLOYEE MANAGEMENT</h1>
  </div>
  <div class="d-flex justify-content-end gap-2 mt-4">
    <input
      class="searchBox"
      (keyup)="filterChange($event)"
      type="text"
      placeholder="Search "
    />
    <button
      matTooltip="New User"
      [matTooltipPosition]="'above'"
      class="btn btn-success"
      (click)="addEmployee()"
    >
      NEW EMPLOYEE
    </button>
  </div>

  <table
    class="table table-hover table-striped mt-4"
    matSort
    mat-table
    [dataSource]="dataSource"
  >
    <ng-container matColumnDef="email">
      <th
        class="fw-bolder fs-5"
        mat-sort-header
        mat-header-cell
        *matHeaderCellDef
      >
        Email
      </th>
      <td mat-cell *matCellDef="let user">{{ user.email }}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th
        class="fw-bolder fs-5"
        mat-sort-header
        mat-header-cell
        *matHeaderCellDef
      >
        Name
      </th>
      <td mat-cell *matCellDef="let user">{{ user.name | titlecase }}</td>
    </ng-container>

    <ng-container matColumnDef="lastName">
      <th
        class="fw-bolder fs-5"
        mat-sort-header
        mat-header-cell
        *matHeaderCellDef
      >
        Last Name
      </th>
      <td mat-cell *matCellDef="let user">{{ user.lastName | titlecase }}</td>
    </ng-container>

    <ng-container matColumnDef="roleName">
      <th
        class="fw-bolder fs-5"
        mat-sort-header
        mat-header-cell
        *matHeaderCellDef
      >
        Role
      </th>
      <td mat-cell *matCellDef="let user">{{ user.roleName }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th class="fw-bolder fs-5" mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let user">
        <div>
          <span
            matTooltip="Update User"
            [matTooltipPosition]="'above'"
            class="icon edit material-symbols-outlined me-3"
            (click)="updateEmployee(user.email)"
            >edit</span
          >
          @if (user.email == userTest) {
          <span
            matTooltip="Delete User"
            [matTooltipPosition]="'above'"
            class="icon disable material-symbols-outlined"
            (click)="delete(user.email)"
          >
            person_remove
          </span>
          }@else {
          <span
            matTooltip="Delete User"
            [matTooltipPosition]="'above'"
            class="icon delete material-symbols-outlined"
            (click)="delete(user.email)"
          >
            person_remove
          </span>
          }
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  <mat-paginator
    showFirstLastButtons
    [pageSize]="10"
    [pageSizeOptions]="[5, 10, 20]"
  ></mat-paginator>
</div>
